{% extends "base.html" %}

{% block content %}
<div class="w3-row-padding">

    <!-- Student Form -->
    <div class="w3-third w3-margin-bottom">
        <div class="w3-card-4 w3-container s3-padding form-card">
            <fieldset>
                <legend><b>STUDENT INFORMATION</b></legend>
                <form enctype="multipart/form-data" method="post" action="/add">
                    <input type="hidden" id="edit_idno" name="edit_idno">
                    
<center>
    <div class="avatar-container">
        <img id="avatarPreview"
            data-default="{{ url_for('static', filename='images/account.png') }}"
            src="{{ url_for('static', filename='images/account.png') }}"
            alt="avatar">
        <span class="avatar-icon">&#128247;</span> 
        <input type="file" name="image" id="imageInput" accept="image/*" style="display:none;">
    </div>
</center>

                    
                    <p>
                        <label><b>IDNO</b></label>
                        <input type="number" name="idno" id="idno" class="w3-input w3-border">
                    </p>

                    <p>
                        <label><b>LASTNAME</b></label>
                        <input type="text" name="lastname" id="lastname" class="w3-input w3-border">
                    </p>

                    <p>
                        <label><b>FIRSTNAME</b></label>
                        <input type="text" name="firstname" id="firstname" class="w3-input w3-border">
                    </p>

                    <p>
                        <label><b>COURSE</b></label>
                        <select name="course" id="course" class="w3-input w3-border">
                            <option value="bsit">INFORMATION TECHNOLOGY</option>
                            <option value="bscs">COMPUTER SCIENCE</option>
                            <option value="bscpe">COMPUTER ENGINEERING</option>
                            <option value="bshm">HOSPITALITY MANAGEMENT</option>
                            <option value="bscj">CRIMINAL JUSTICE</option>
                        </select>
                    </p>

                    <p>
                        <label><b>LEVEL</b></label>
                        <select name="level" id="level" class="w3-input w3-border">
                            <option value="1">FIRST YEAR</option>
                            <option value="2">SECOND YEAR</option>
                            <option value="3">THIRD YEAR</option>
                            <option value="4">FOURTH YEAR</option>
                        </select>
                    </p>

                    <p class="w3-right">
                        <input type="submit" value="SAVE" class="w3-button w3-blue">
                        <input type="reset" value="CANCEL" class="w3-button w3-green">
                    </p>
                </form>
            </fieldset>
        </div>
    </div>
    <!-- Student Table -->
    <div class="w3-twothird w3-container">
        <table class="w3-table-all w3-card-4">
            <tr>
                <th>IDNO</th>
                <th class="w3-hide-small w3-hide-medium">LASTNAME</th>
                <th class="w3-hide-small w3-hide-medium">FIRSTNAME</th>
                <th class="w3-hide-large">NAME</th>
                <th class="w3-hide-small w3-hide-medium">COURSE</th>
                <th class="w3-hide-small w3-hide-medium">LEVEL</th>
                <th class="w3-hide-large">COURSE & LEVEL</th>
                <th>ACTIONS</th>
            </tr>

            {% for student in studentlist %}
            <tr 
                data-idno="{{ student['idno'] }}"
                data-lastname="{{ student['lastname'] }}"
                data-firstname="{{ student['firstname'] }}"
                data-course="{{ student['course'] }}"
                data-level="{{ student['level'] }}"
                data-image="{{ student['image'] if student['image'] else '' }}"
            >
                <td>{{ student['idno'] }}</td>
                <td class="w3-hide-small w3-hide-medium">{{ student['lastname'].upper() }}</td>
                <td class="w3-hide-small w3-hide-medium">{{ student['firstname'].upper() }}</td>
                <td class="w3-hide-large">{{ student['lastname'].upper() }}, {{ student['firstname'].upper() }}</td>
                <td class="w3-hide-small w3-hide-medium">{{ student['course'].upper() }}</td>
                <td class="w3-hide-small w3-hide-medium">{{ student['level'] }}</td>
                <td class="w3-hide-large">{{ student['course'].upper() }} - {{ student['level'] }}</td>
                <td>
                    <button type="button" class="edit-btn">&#128393;</button>
                    <button type="button" class="delete-btn">&#128465;</button>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="w3-modal" style="display:none;">
  <div class="w3-modal-content w3-animate-top w3-round-large w3-padding w3-center" style="max-width:400px;">
    <h4><b>Confirm Delete</b></h4>
    <p>Are you sure you want to delete this student?</p>
    <div class="w3-section">
      <button id="confirmDelete">Delete</button>
      <button class="cancel" onclick="document.getElementById('deleteModal').style.display='none'">Cancel</button>
    </div>
  </div>
</div>

<!-- Error Modal -->
<div id="errorModal" class="w3-modal" style="display:none;">
  <div class="w3-modal-content w3-animate-top w3-round-large w3-padding w3-center" style="max-width:400px;">
    <h4 class="modal-title"><b>Missing Fields</b></h4>
    <p id="errorMessage">All fields are required. Please complete the form.</p>
    <div class="w3-section">
      <button onclick="document.getElementById('errorModal').style.display='none'" class="modal-btn">OK</button>
    </div>
  </div>
</div>



{% endblock %}
